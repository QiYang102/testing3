<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <style>
    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .logo {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      width: 100vw;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    #logoE {
      max-height: 50px;
    }

    .links {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: clamp(12px, 3vw, 32px);
      width: 100%;
      margin-bottom: 20px;
    }

    /* Base link style */
    .links a,
    .menu-toggle,
    .menu-list a {
      position: relative;
      font-size: 16pt;
      color: inherit;
      text-decoration: none;
      padding: 4px 0;
    }

    /* Underline effect */
    .links a::after,
    .menu-toggle::after,
    .menu-list a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -4px;
      width: 0;
      height: 2px;
      background-color: #0077cc;
      transition: width 0.3s ease;
    }

    .links a:hover::after,
    .menu-toggle:hover::after,
    .menu-list a:hover::after {
      width: 100%;
    }

    .links a.active::after,
    .menu-toggle.active::after,
    .menu-list a.active::after {
      width: 100%;
    }

    .menu {
      position: relative;
    }

    .menu-toggle {
      background: none;
      border: 0;
      cursor: pointer;
      padding: 6px 4px;
      line-height: 1;
    }

    .menu-list {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      display: none;
      min-width: 200px;
      padding: 8px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
      z-index: 2000;
    }

    .menu-list a {
      display: block;
      padding: 10px 12px;
      border-radius: 6px;
      white-space: nowrap;
    }

    .menu.open .menu-list {
      display: block;
    }

    /* === BURGER STYLES === */
    .burger {
      position: relative;
      width: 40px;
      height: 30px;
      background: transparent;
      cursor: pointer;
      display: none; /* shown only on mobile */
    }

    .burger input {
      display: none;
    }

    .burger span {
      display: block;
      position: absolute;
      height: 4px;
      width: 100%;
      background: black;
      border-radius: 9px;
      opacity: 1;
      left: 0;
      transform: rotate(0deg);
      transition: .25s ease-in-out;
    }

    .burger span:nth-of-type(1) {
      top: 0px;
      transform-origin: left center;
    }

    .burger span:nth-of-type(2) {
      top: 50%;
      transform: translateY(-50%);
      transform-origin: left center;
    }

    .burger span:nth-of-type(3) {
      top: 100%;
      transform-origin: left center;
      transform: translateY(-100%);
    }

    .burger input:checked~span:nth-of-type(1) {
      transform: rotate(45deg);
      top: 0px;
      left: 5px;
    }

    .burger input:checked~span:nth-of-type(2) {
      width: 0%;
      opacity: 0;
    }

    .burger input:checked~span:nth-of-type(3) {
      transform: rotate(-45deg);
      top: 28px;
      left: 5px;
    }

    /* Phone */
    @media (max-width: 768px) {
      nav {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;
      }

      .logo {
        margin: 0 auto;
      }

      .burger {
        display: block;
        position: absolute;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        z-index: 1100;
      }

      .nav-panel {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        display: none;
        flex-direction: column;
        gap: 10px;
        padding: 12px 16px 16px;
        background: rgba(255, 255, 255, 0.92);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      }

      nav.nav--open .nav-panel {
        display: flex;
      }

      .links a,
      .menu-toggle {
        font-size: 15px;
      }

      .menu {
        position: static;
      }

      .menu-list {
        position: static;
        display: none;
        background: transparent;
        box-shadow: none;
        padding: 0 0 0 8px;
        margin-top: 6px;
      }

      .menu.open .menu-list {
        display: block;
      }
    }
  </style>
</head>

<body>
  <nav>
    <div class="logo">
      <img id="logoE" src="src/elements/image/image 27.png" alt="Makan Island">
    </div>

    <!-- ✅ Burger replaces old nav-toggle -->
    <label class="burger" for="burger">
      <input type="checkbox" id="burger">
      <span></span>
      <span></span>
      <span></span>
    </label>

    <div class="links nav-panel">
      <a href="#" class="active">Home</a>
      <a href="#">About Us</a>
      <a href="#">Login</a>

      <div class="menu">
        <button class="menu-toggle" aria-haspopup="true" aria-expanded="false">Malaysia ▾</button>
        <div class="menu-list" role="menu">
          <a role="menuitem" href="#">Perak</a>
          <a role="menuitem" href="#">Penang</a>
          <a role="menuitem" href="#">Kedah</a>
          <a role="menuitem" href="#">Kelantan</a>
        </div>
      </div>

      <div class="menu">
        <button class="menu-toggle" aria-haspopup="true" aria-expanded="false">Others ▾</button>
        <div class="menu-list" role="menu">
          <a role="menuitem" href="#">Favourite</a>
          <a role="menuitem" href="#">Best Food in 2025</a>
          <a role="menuitem" href="#">Quiz</a>
          <a role="menuitem" href="#">Travel</a>
          <a role="menuitem" href="#">Contact</a>
        </div>
      </div>
    </div>
  </nav>

  <div id="testing" style="width: 100vw; height: 100vh; background-color: black; margin-top: 200px;"></div>

  <script>
    // dropdown open/close
    document.querySelectorAll('.menu-toggle').forEach((btn) => {
      btn.addEventListener('click', (e) => {
        const menu = btn.closest('.menu');
        const isOpen = menu.classList.contains('open');

        document.querySelectorAll('.menu.open').forEach(m => {
          m.classList.remove('open');
          const t = m.querySelector('.menu-toggle');
          if (t) t.setAttribute('aria-expanded', 'false');
        });

        if (!isOpen) {
          menu.classList.add('open');
          btn.setAttribute('aria-expanded', 'true');
        } else {
          btn.setAttribute('aria-expanded', 'false');
        }
      });
    });

    // click outside to close dropdown
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.menu')) {
        document.querySelectorAll('.menu.open').forEach(m => {
          m.classList.remove('open');
          const t = m.querySelector('.menu-toggle');
          if (t) t.setAttribute('aria-expanded', 'false');
        });
      }
    });

    // Esc to close dropdown
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.querySelectorAll('.menu.open').forEach(m => {
          m.classList.remove('open');
          const t = m.querySelector('.menu-toggle');
          if (t) t.setAttribute('aria-expanded', 'false');
        });
      }
    });

    // === Burger toggle for mobile nav ===
    const burgerInput = document.getElementById("burger");
    const nav = document.querySelector("nav");

    burgerInput.addEventListener("change", () => {
      if (burgerInput.checked) {
        nav.classList.add("nav--open");
      } else {
        nav.classList.remove("nav--open");
      }
    });

    // === Active link highlight ===
    const navLinks = document.querySelectorAll('.links a, .menu-list a');
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        navLinks.forEach(l => l.classList.remove('active'));
        document.querySelectorAll('.menu-toggle').forEach(mt => mt.classList.remove('active'));

        e.target.classList.add('active');

        const parentMenu = e.target.closest('.menu');
        if (parentMenu) {
          const toggleBtn = parentMenu.querySelector('.menu-toggle');
          if (toggleBtn) toggleBtn.classList.add('active');
        }
      });
    });
  </script>
</body>

</html>
